<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NYC Citi Bike | Visualization</title>
    <style>
        /* GENEL AYARLAR */
        body { 
            margin: 0; padding: 0; 
            font-family: Arial, sans-serif; 
            background-color: #333; color: #333; overflow-x: hidden; 
        }
        
        /* Arkaplan Videosu */
        #bg-video {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            z-index: -1; object-fit: cover; filter: blur(8px); transform: scale(1.3);
        }

        /* Navigasyon */
        nav { 
            background-color: rgba(255, 255, 255, 0.95); 
            padding: 10px 50px; 
            display: flex; justify-content: space-between; align-items: center; 
            position: sticky; top: 0; z-index: 1000; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
            box-sizing: border-box;
        }
        
        .logo-link img { height: 80px; width: auto; margin-right: 0; transition: 0.3s; }
        .logo-link img:hover { opacity: 0.8; transform: scale(1.05); }
        
        nav ul { list-style: none; display: flex; margin: 0; padding: 0; }
        nav ul li { margin-left: 30px; }
        nav ul li a { text-decoration: none; color: #555; font-weight: bold; font-size: 20px; transition: 0.3s; }
        nav ul li a:hover, nav ul li a.active { color: #00AEEF; border-bottom: 3px solid #00AEEF; }

        /* Ana İçerik */
        .main-container { width: 85%; max-width: 1000px; margin: 40px auto; padding-bottom: 50px; }
        
        .page-title { 
            background-color: rgba(255, 255, 255, 0.95); padding: 20px; border-radius: 12px; text-align: center; margin-bottom: 30px; 
        }

        /* Intro Kutusu */
        .intro-box {
            background-color: rgba(255, 255, 255, 0.95); 
            padding: 40px; 
            border-radius: 12px; 
            margin-bottom: 50px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-left: 6px solid #00AEEF; 
        }
        
        .charts-grid { display: grid; grid-template-columns: 1fr; gap: 50px; }

        .chart-box { background-color: rgba(255, 255, 255, 0.98); padding: 30px; border-radius: 12px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
        
        h2.chart-title { 
            color: #2c3e50; 
            border-left: 5px solid #00AEEF; 
            padding-left: 15px; font-size: 1.8rem; margin-top: 0; margin-bottom: 20px; font-weight: bold;
        }
        
        .image-container { 
            width: 100%; height: auto; 
            background-color: #fff; border-radius: 8px; border: 1px solid #eee; 
            overflow: hidden; display: block; 
        }

        .chart-img { 
            width: 100%; height: auto; display: block; 
            transition: transform 0.3s ease; cursor: pointer; 
        }
        .chart-img:hover { transform: scale(1.03); }

        .iframe-container {
            width: 100%; height: 600px; 
            border: 1px solid #eee; border-radius: 8px; overflow: hidden; background-color: white;
        }

        .placeholder { 
            color: #aaa; font-weight: bold; font-size: 1.5rem; border: 2px dashed #ddd; background: #fdfdfd; 
            height: 400px; display: flex; justify-content: center; align-items: center;
        }
        
        .chart-desc { margin-top: 20px; color: #666; font-size: 1.1rem; line-height: 1.6; background-color: #f0f8ff; padding: 15px; border-radius: 5px; }

        footer { text-align: center; color: #ddd; padding: 20px; font-size: 0.9rem; margin-top: 20px; }

        /* Lightbox */
        #lightbox {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.9); 
            z-index: 2000; justify-content: center; align-items: center; cursor: pointer; 
        }
        #lightbox img {
            max-width: 90%; max-height: 90%; border-radius: 5px;
            box-shadow: 0 0 20px rgba(255,255,255,0.2); cursor: default; 
        }
    </style>
</head>
<body>
    <video muted loop playsinline id="bg-video">
        <source src="background.mp4" type="video/mp4">
    </video>
    
    <nav>
        <a href="index.html" class="logo-link"><img src="logo.png" alt="Home Logo"></a>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="details.html">Project Details</a></li>
            <li><a href="visualization.html" class="active">Visualization</a></li>
        </ul>
    </nav>

    <div class="main-container">
        
        <div class="page-title">
            <h1 style="margin:0; color:#333; font-weight: bold;">Data Visualizations</h1>
        </div>

        <div class="intro-box">
            <h2 style="margin-top: 0; color: #00AEEF; font-size: 2rem;">Data in Motion: Visualizing NYC’s Citi Bike Network</h2>
            <p style="font-size: 1.2rem; line-height: 1.8; color: #444; margin-top: 20px;">
                Numbers tell a story, but visualizations bring that story to life. This project transforms millions of data points into a narrative of urban movement, revealing the heartbeat of New York City.
                <br><br>
                Throughout this journey, we will uncover the city’s daily rhythm, expose the logistical struggles of station imbalances, and quantify the environmental impact of green commuting. Finally, you will have the tools to explore these patterns yourself.
                <br><br>
                <strong>Follow the data below to see the hidden patterns behind every pedal stroke.</strong>
            </p>
        </div>

        <div class="charts-grid">
            
            <div class="chart-box">
                <h2 class="chart-title">1. Heatmap Analysis</h2>
                <div class="image-container">
                    <img src="heatmap.png" alt="Heatmap Chart" class="chart-img" onclick="openLightbox(this)">
                </div>
                <p class="chart-desc" style="font-size: 0.95rem; line-height: 1.6; text-align: justify;">
                    This heatmap illustrates how New York City moves over the course of a week based on millions of data points. Darker colors represent periods of higher bike usage, and at first glance, it becomes clear that the city follows a distinctive “daily pulse”.
                    <br><br>
                    On weekdays, the dark blue areas around 08:00 in the morning and especially between 17:00 and 18:00 in the evening stand out immediately. This indicates that New Yorkers primarily use Citi Bike as a commuting tool to travel to and from work, often as a way to avoid traffic congestion. During weekends, however, this pattern changes significantly. Instead of riding early in the morning, users tend to bike more frequently in the afternoon, typically between 12:00 and 18:00, suggesting a shift toward recreational use. At night, the heatmap becomes nearly empty, representing the period when the system is largely inactive, and bikes are prepared for the following day.
                    <br><br>
                    While this visualization demonstrates how predictable bike usage patterns are, this very predictability creates a major operational challenge. Because thousands of people move in the same direction at the same time, the system faces massive pressure. This regular flow forms the foundation for the next stage of our project: understanding the resulting logistical imbalance between stations.
                    <br><br>
                    <em style="font-size: 0.85rem; color: #666; display: block; border-top: 1px solid #ddd; padding-top: 10px;">
                        Note: This visualization was created by aggregating raw Citi Bike data by day and hour. The letter “k” next to the values represents thousands; for example, 740k indicates 740,000 trips were recorded during that time interval.
                    </em>
                </p>
            </div>
            
            <div class="chart-box">
                <h2 class="chart-title">2. Operational Challenges: Station Imbalance</h2>
                
                <div class="image-container">
                    <img src="barchart.png" alt="Station Imbalance Analysis" class="chart-img" onclick="openLightbox(this)">
                </div>

                <div style="display: flex; justify-content: center; margin-top: 25px; margin-bottom: 15px;">
                    <img src="legend.png" alt="Chart Legend" style="max-width: 80%; height: auto; border: 1px solid #eee; padding: 10px; border-radius: 8px; background-color: #fff;">
                </div>

                <p class="chart-desc" style="font-size: 1.2rem; line-height: 1.6; text-align: justify;">
                    While the city follows a predictable rhythm, this movement creates one of the biggest operational challenges in the New York Citi Bike network: the severe imbalance of bikes between stations. From an industrial engineer's perspective, this chart illustrates the logistical strain on the system and reveals how bicycles tend to 'cluster' in certain areas.
                    <br><br>
                    Based on the 'Net Balance' (Inflows - Outflows) formula, we can categorize the 30 most imbalanced stations into two distinct types:
                    <br><br>
                    <strong>Sources (Red Bars):</strong> These stations act as the starting points for thousands of journeys. A striking example is the Central Park West & W 68th St station, which shows a massive deficit of -72.7k, meaning thousands of riders start here but almost no one returns.
                    <br><br>
                    <strong>Sinks (Blue Bars):</strong> These are 'accumulation points' like Broadway & W 56th St, where bikes constantly pile up, but very few people start a new trip.
                    <br><br>
                    You may notice a fascinating disparity: red bars (deficits) reach as high as -70k, while the largest blue bars (excesses) only reach about +4.8k. This is not a data error, but a reflection of the 'Hub & Spoke' model of urban life. People pick up bikes in massive waves from specific hubs—like subway exits or major park entrances—creating 'giant holes' in the system. However, those riders then scatter to thousands of different destinations, returning bikes in small numbers to decentralized stations. The result is a system of 'Giant Sources' versus thousands of 'Tiny Sinks.'
                    <br><br>
                    This constant redistribution challenge is why Citi Bike teams must move thousands of bikes by truck every single day to prevent 'empty docks' at sources and 'no parking' at sinks. Yet, despite this logistical struggle, the scale of this movement leads to an incredible environmental achievement. In the next section, we will see how these millions of miles traveled translate into measurable carbon savings and what the future holds for the city's sustainability.
                </p>
            </div>
            
            <div class="chart-box">
                <h2 class="chart-title">3. User Demographics</h2>
                <div class="image-container placeholder">Chart 3 Coming Soon</div>
                <p class="chart-desc"><strong>Analysis:</strong> Description area for the third chart.</p>
            </div>
            
            <div class="chart-box">
                <h2 class="chart-title">4. Station Network (Interactive)</h2>
                
                <div class="iframe-container">
                    <iframe src="interactive.html" width="100%" height="100%" style="border:none;"></iframe>
                </div>

                <p class="chart-desc" style="font-size: 1.2rem;">
                    <strong>Analysis:</strong> This is an interactive network map. You can zoom in, hover over nodes to see details, and drag the map to explore different areas.
                </p>
            </div>

        </div>
    </div>
    
    <footer>© 2026 NYC Bike Project</footer>

    <div id="lightbox" onclick="closeLightbox()">
        <img id="lightbox-img" src="" onclick="event.stopPropagation()"> 
    </div>

    <script>
        function openLightbox(imgElement) {
            var lightbox = document.getElementById('lightbox');
            var lightboxImg = document.getElementById('lightbox-img');
            lightboxImg.src = imgElement.src; 
            lightbox.style.display = 'flex';  
        }
        function closeLightbox() {
            var lightbox = document.getElementById('lightbox');
            lightbox.style.display = 'none'; 
        }
        document.addEventListener('keydown', function(event) {
            if (event.key === "Escape") { closeLightbox(); }
        });
    </script>
</body>
</html>
